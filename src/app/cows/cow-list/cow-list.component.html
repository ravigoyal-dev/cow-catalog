<mat-toolbar color="primary">
  <span>Cow Management</span>
  <span class="spacer"></span>
  <button mat-raised-button color="accent" routerLink="/add-cow">
    Add Cow
  </button>
</mat-toolbar>

<div class="container">

  <!-- Filters -->
  <mat-card class="filter-card">
    <div class="filter-row">

      <mat-form-field appearance="outline">
        <mat-label>Search by Tag</mat-label>
        <input matInput [(ngModel)]="searchTag">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="filterStatus">
          <mat-option value="">All</mat-option>
          <mat-option value="Active">Active</mat-option>
          <mat-option value="In Treatment">In Treatment</mat-option>
          <mat-option value="Deceased">Deceased</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Pen</mat-label>
        <input matInput [(ngModel)]="filterPen">
      </mat-form-field>
      
    </div>
  </mat-card>

  <!-- Table -->
  <mat-card class="table-card">
    <div class="table-responsive">

      <table mat-table [dataSource]="filteredCows()" class="mat-elevation-z2">

        <!-- Tag -->
        <ng-container matColumnDef="tag">
          <th mat-header-cell *matHeaderCellDef> Tag </th>
          <td mat-cell *matCellDef="let cow"> {{ cow.tag }} </td>
        </ng-container>

        <!-- Sex -->
        <ng-container matColumnDef="sex">
          <th mat-header-cell *matHeaderCellDef> Sex </th>
          <td mat-cell *matCellDef="let cow"> {{ cow.sex }} </td>
        </ng-container>

        <!-- Pen -->
        <ng-container matColumnDef="pen">
          <th mat-header-cell *matHeaderCellDef> Pen </th>
          <td mat-cell *matCellDef="let cow"> {{ cow.pen }} </td>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let cow">
            <span class="status-badge"
                  [ngClass]="getStatusClass(cow.status)">
              {{ cow.status }}
            </span>
          </td>
        </ng-container>

        <!-- Last Event -->
        <ng-container matColumnDef="lastEventDate">
          <th mat-header-cell *matHeaderCellDef> Last Event </th>
          <td mat-cell *matCellDef="let cow">
            {{ cow.lastEventDate | date:'mediumDate' }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row
            *matRowDef="let row; columns: displayedColumns; trackBy: trackByTag"
            (click)="viewCow(row)">
        </tr>

      </table>

    </div>
  </mat-card>

</div>